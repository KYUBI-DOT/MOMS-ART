{{>header}}

<style>
  html {
    scroll-behavior: smooth;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f9fafb;
    color: #333;
  }
  
  .layout {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  main {
    margin-top: 40px;
    flex: 1;
    padding: 2rem 1rem;
  }

  .account-container {
    display: flex;
    max-width: 1100px;
    margin: 0 auto;
    padding: 2rem;
    gap: 2rem;
    flex-wrap: nowrap;
    background: url("productimage/sky1.jpg");
    box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
    border-radius: 8px;
    /* Change flex direction to row-reverse for sidebar on right */
    flex-direction: row-reverse;
  }

  /* Sidebar on right */
  .account-sidebar {
  flex: 1 1 100px;   
  border-left: 1px solid #ddd;
  padding-left: 1.5rem;  /* Slightly less padding */
  min-width: 100px;   /* Reduced from 220px */
  text-align: left;
}
  .account-sidebar h3 {
    margin-bottom: 1rem;
    font-size: 1.25rem;
    color: #08509ee4;
    border-bottom: 2px solid #08509ee4;
    padding-bottom: 0.5rem;
  }

  .account-sidebar ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .account-sidebar li {
    margin: 0.75rem 0;
  }

  .account-sidebar a {
    text-decoration: none;
    color: #08509ee4;
    font-weight: 600;
    transition: color 0.3s ease;
  }

  .account-sidebar a:hover,
  .account-sidebar a:focus {
    color: #129cb5ad;
    text-decoration: underline;
  }

  /* Main Account Page */
  .account-page {
    flex: 3 1 0;
    min-width: 0;
  }

  h2 {
    color: #222;
    margin-bottom: 1rem;
  }

  .info label {
    font-weight: 600;
    display: block;
    margin-bottom: 0.5rem;
    font-size: 1.1rem;
    color: #555;
  }

  .info-row {
    display: flex;
    justify-content: flex-start;
    gap: 1rem;
    margin: 0.5rem 0 1rem;
    align-items: center;
  }

  .info-label {
    font-weight: bold;
    width: 120px;
    color: #444;
  }

  .info-value {
    flex: 1;
    text-align: left;
    background: #f4f6f8;
    padding: 8px 12px;
    border-radius: 4px;
    border: 1px solid #ddd;
  }
  form label {
  display: flex;
  align-items: center;
  gap: 10px;  /* space between label text and input */
  margin-bottom: 12px;
  font-weight: 600;
  width: 100%;  /* make label fill the container */
}
input[type="text"] {
  width: 400px;
  padding: 10px 12px;
  margin-top: 6px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 1rem;
  transition: border-color 0.3s ease;
  box-sizing: border-box; /* ensures padding and border are inside the 500px */
}


  input[type="text"]:focus {
    border-color: #007BFF;
    outline: none;
  }

  /* Buttons */
  button {
    margin-top: 1rem;
    padding: 10px 22px;
    background-color: #007bff33;
    border: none;
    color: #130101;
    cursor: pointer;
    border-radius: 5px;
    font-size: 1rem;
    font-weight: 600;
    transition: background-color 0.3s ease;
  }

  button:hover {
    background-color: #129cb5ad;
  }

  /* Cart Table */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
  }

  table thead tr {
    background-color:#007bff33;
    color: black;
  }

  table th, table td {
    padding: 12px 10px;
    border: 1px solid #ddd;
    text-align: center;
  }

  table tbody tr:nth-child(even) {
    background-color: #f9f9f9;
  }

  table tbody tr:hover {
    background-color: #e6f0ff;
  }

  .btn-danger {
    background-color: :#007bff33;
    border: none;
    padding: 6px 12px;
    border-radius: 4px;
    color: black;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .btn-danger:hover {
    background-color: #129cb5ad;
  }

  /* Actions */
  .actions {
    margin-top: 2rem;
    display: flex;
    gap: 1rem;
  }
  .a{
    text-decoration: none;
  }
  /* Checkout button */
.checkout-button {
  margin: 2rem auto 0;
  width: 20%;
  display: block;
  background-color: #007bff33;
  padding: 10px;
  text-align: center;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}


  .checkout-button:hover {
    background-color: #129cb5ad;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .account-container {
      flex-direction: column;
      padding: 1rem;
    }

    .account-sidebar {
      border-left: none;
      border-bottom: 1px solid #ddd;
      padding-left: 0;
      padding-bottom: 1rem;
      text-align: left;
      min-width: auto;
      margin-bottom: 1rem;
    }

    .account-page {
      flex: none;
    }
  }
</style>

<div class="layout">
  <main>
    <div class="account-container">
      <!-- Sidebar on right -->
      <aside class="account-sidebar">
        <h3>My Account</h3>
        <ul>
          <li><a href="#settings">Account Settings</a></li>
          <li><a href="#address">Address Details</a></li>
          <li><a href="#cart">Shopping Cart</a></li>
          <li><a href="#" onclick="alert('Change Password clicked!')">Change Password</a></li>
          <li><a href="/logout">Logout</a></li>
        </ul>
      </aside>

      <!-- Main Content -->
      <section class="account-page">
        <h2 id="settings">Account Settings</h2>

        <div class="info">
          <label>Contact Information:</label>
          <div class="info-row">
            <span class="info-label">Name:</span>
            <span class="info-value">{{user.name}}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Email:</span>
            <span class="info-value">{{user.email}}</span>
          </div>
        </div>

        <div class="account-section">
          <h2 id="address">Address Details</h2>

          <div id="addressSection">
            {{#if showForm}}
              <h3>Please Enter Your Address</h3>
              <form action="/logined/address" method="POST">
                <label>Street: <input type="text" name="street" required></label><br>
                <label>City: <input type="text" name="city" required></label><br>
                <label>State: <input type="text" name="state" required></label><br>
                <label>Zip: <input type="text" name="zip" required></label><br>
                <label>Country: <input type="text" name="country" required></label><br>
                <button type="submit">Submit Address</button>
              </form>
            {{else}}
              <h3>Your Address</h3>
              <p>{{user.street}}, {{user.city}}, {{user.state}} - {{user.zip}}, {{user.country}}</p>
            {{/if}}
          </div>
        </div>

        <h2 id="cart">Shopping Cart ({{totalItems}} item{{#if (gt totalItems 1)}}s{{/if}})</h2>
        <a href="/shop" style="text-decoration: underline; font-size: 14px;">Continue Shopping</a>

        <table>
          <thead>
            <tr>
              <th>Item</th>
              <th>Qty</th>
              <th>Price</th>
              <th>Total</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            {{#if cart.length}}
              {{#each cart}}
              <tr>
                <td>{{product_name}}</td>
                <td>
                  <form action="/logined" method="POST" style="display:inline-block;">
                    <input type="hidden" name="product_id" value="{{product_id}}">
                    <button type="submit" name="action" value="decrement">-</button>
                    <input type="number" value="{{quantity}}" readonly style="width: 30px; text-align:center;">
                    <button type="submit" name="action" value="increment">+</button>
                  </form>
                </td>
                <td>$ {{product_price}}</td>
                <td>$ {{multiply product_price quantity}}</td>
                <td>
                  <form action="/cart/remove/{{product_id}}" method="POST" onsubmit="return confirm('Are you sure?')" style="display:inline-block;">
                    <button class="btn btn-danger btn-sm">Remove</button>
                  </form>
                </td>
              </tr>
              {{/each}}
            {{else}}
              <tr><td colspan="5">Your cart is empty.</td></tr>
            {{/if}}
          </tbody>
        </table>
        
        <button class="checkout-button">Checkout</button>

        <div class="actions">
          <button onclick="alert('Change Password clicked!')">Change Password</button>
          <button onclick="window.location.href='/logout'">Logout</button>
        </div>

      </section>
    </div>
  </main>
</div>

{{>footer}}
